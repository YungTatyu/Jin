{
  "version": 3,
  "sources": ["../src/index.ts", "../src/bi.ts"],
  "sourcesContent": ["export * from './bi';\n", "import { v4 } from 'uuid';\n\nexport enum AcitveLoginType {\n    PARTICLE = 'particle',\n    PRIVATE_KEY = 'private_key',\n    METAMASK = 'metamask',\n    RAINBOW = 'rainbow',\n    TRUST = 'trust',\n    IM_TOKEN = 'im_token',\n    BIT_KEEP = 'bit_keep',\n    PHANTOM = 'phantom',\n    OTHER = 'other',\n}\n\nexport enum ActiveAction {\n    SIGN = 'sign',\n    LOGIN = 'login',\n    OPEN = 'open',\n    OPEN_WALLET = 'open_wallet',\n}\nexport interface BiOptions {\n    sdk_api_domain: string;\n    device_id: string;\n    sdk_version: string;\n    project_config: {\n        project_uuid: string;\n        project_key: string;\n        project_app_uuid: string;\n    };\n}\n\nexport interface SendActiveParams {\n    chain_id: number;\n    identity: string;\n    login_type: AcitveLoginType;\n    action: ActiveAction;\n    wallet_address: string;\n    user_info?: string;\n}\n\nexport enum RecordType {\n    PAGE_LOGIN_BUTTON_CLICK = 'page_login_button_click', // \u767B\u5F55\u6309\u94AE\u70B9\u51FB\n    PAGE_LOGIN_BUTTON_CLICK_SUCCESS = 'page_login_button_click_success', // \u767B\u5F55\u6210\u529F\n    PAGE_LOGIN_BUTTON_CLICK_FAILURE = 'page_login_button_click_failure', // \u767B\u5F55\u5931\u8D25\n    PAGE_LOGIN_SUCCESS_BACK = 'page_login_success_back', // \u767B\u5F55\u6210\u529F\u540E\u8FD4\u56DEapp\n    PAGE_SIGN_CONFIRM_BUTTON_CLICK = 'page_sign_confirm_button_click', // confirm\u6309\u94AE\u70B9\u51FB\n    PAGE_SIGN_CONFIRM_BUTTON_CLICK_SUCCESS = 'page_sign_confirm_button_click_success', // confirm\u6210\u529F\n    PAGE_SIGN_CONFIRM_BUTTON_CLICK_FAILURE = 'page_sign_confirm_button_click_failure', // confirm\u5931\u8D25\n    PAGE_SETTING_MASTER_PASSWORD_ENTER = 'page_setting_master_password_enter', // \u8FDB\u5165\u4E3B\u5BC6\u7801\u8BBE\u7F6E\u9875\u9762\n    PAGE_SETTING_MASTER_PASSWORD_SET = 'page_setting_master_password_set', // \u4E3B\u5BC6\u7801\u8BBE\u7F6E\u6210\u529F\n    PAGE_SETTING_MASTER_PASSWORD_CHANGE = 'page_setting_master_password_change', // \u4E3B\u5BC6\u7801\u4FEE\u6539\u6210\u529F\n    PAGE_MASTER_PASSWORD_VERIFY = 'page_master_password_verify', // \u4E3B\u5BC6\u7801\u9A8C\u8BC1\n    PAGE_MASTER_PASSWORD_VERIFY_SUCCESS = 'page_master_password_verify_success', // \u4E3B\u5BC6\u7801\u9A8C\u8BC1\u6210\u529F\n}\nexport interface SendRecordsParams {\n    record_type: RecordType;\n    reason?: string;\n}\n\nexport class BI {\n    private options: BiOptions;\n\n    constructor(options: BiOptions) {\n        this.options = options;\n    }\n\n    active(params: SendActiveParams) {\n        const timestamp: number = Math.round(new Date().getTime() / 1000);\n        const randomStr: string = v4();\n        const { project_uuid, project_key, project_app_uuid } = this.options.project_config;\n\n        const queryParams = {\n            timestamp,\n            random_str: randomStr,\n            project_app_uuid: project_app_uuid,\n            projectUuid: project_uuid,\n            projectKey: project_key,\n        };\n\n        let url = this.options.sdk_api_domain + '/active?';\n        Object.keys(queryParams).forEach((key) => {\n            //  @ts-ignore\n            url += `${key}=${encodeURI(queryParams[key])}&`;\n        });\n        url = url.slice(0, -1);\n\n        navigator.sendBeacon(\n            url,\n            new Blob([new URLSearchParams(params as any).toString()], {\n                type: 'application/x-www-form-urlencoded',\n            })\n        );\n    }\n\n    records(params: SendRecordsParams) {\n        try {\n            console.log('>>>>>send records', params);\n            const timestamp: number = Math.round(new Date().getTime() / 1000);\n            const randomStr: string = v4();\n            const { project_uuid, project_key, project_app_uuid } = this.options.project_config;\n\n            const queryParams = {\n                timestamp,\n                random_str: randomStr,\n                project_app_uuid: project_app_uuid,\n                projectUuid: project_uuid,\n                projectKey: project_key,\n            };\n\n            let url = this.options.sdk_api_domain + '/records?';\n            Object.keys(queryParams).forEach((key) => {\n                //  @ts-ignore\n                url += `${key}=${encodeURI(queryParams[key])}&`;\n            });\n            url = url.slice(0, -1);\n\n            navigator.sendBeacon(\n                url,\n                new Blob([new URLSearchParams(params as any).toString()], {\n                    type: 'application/x-www-form-urlencoded',\n                })\n            );\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,kBAAmB;AAEZ,IAAK,kBAAL,kBAAKA,qBAAL;AACH,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,iBAAc;AACd,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,aAAU;AACV,EAAAA,iBAAA,WAAQ;AACR,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,cAAW;AACX,EAAAA,iBAAA,aAAU;AACV,EAAAA,iBAAA,WAAQ;AATA,SAAAA;AAAA,GAAA;AAYL,IAAK,eAAL,kBAAKC,kBAAL;AACH,EAAAA,cAAA,UAAO;AACP,EAAAA,cAAA,WAAQ;AACR,EAAAA,cAAA,UAAO;AACP,EAAAA,cAAA,iBAAc;AAJN,SAAAA;AAAA,GAAA;AA0BL,IAAK,aAAL,kBAAKC,gBAAL;AACH,EAAAA,YAAA,6BAA0B;AAC1B,EAAAA,YAAA,qCAAkC;AAClC,EAAAA,YAAA,qCAAkC;AAClC,EAAAA,YAAA,6BAA0B;AAC1B,EAAAA,YAAA,oCAAiC;AACjC,EAAAA,YAAA,4CAAyC;AACzC,EAAAA,YAAA,4CAAyC;AACzC,EAAAA,YAAA,wCAAqC;AACrC,EAAAA,YAAA,sCAAmC;AACnC,EAAAA,YAAA,yCAAsC;AACtC,EAAAA,YAAA,iCAA8B;AAC9B,EAAAA,YAAA,yCAAsC;AAZ9B,SAAAA;AAAA,GAAA;AAmBL,IAAM,KAAN,MAAS;AAAA,EAGZ,YAAY,SAAoB;AAC5B,SAAK,UAAU;AAAA,EACnB;AAAA,EAEA,OAAO,QAA0B;AAC7B,UAAM,YAAoB,KAAK,MAAM,IAAI,KAAK,EAAE,QAAQ,IAAI,GAAI;AAChE,UAAM,gBAAoB,gBAAG;AAC7B,UAAM,EAAE,cAAc,aAAa,iBAAiB,IAAI,KAAK,QAAQ;AAErE,UAAM,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,MACZ;AAAA,MACA,aAAa;AAAA,MACb,YAAY;AAAA,IAChB;AAEA,QAAI,MAAM,KAAK,QAAQ,iBAAiB;AACxC,WAAO,KAAK,WAAW,EAAE,QAAQ,CAAC,QAAQ;AAEtC,aAAO,GAAG,OAAO,UAAU,YAAY,IAAI;AAAA,IAC/C,CAAC;AACD,UAAM,IAAI,MAAM,GAAG,EAAE;AAErB,cAAU;AAAA,MACN;AAAA,MACA,IAAI,KAAK,CAAC,IAAI,gBAAgB,MAAa,EAAE,SAAS,CAAC,GAAG;AAAA,QACtD,MAAM;AAAA,MACV,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,QAAQ,QAA2B;AAC/B,QAAI;AAEA,YAAM,YAAoB,KAAK,MAAM,IAAI,KAAK,EAAE,QAAQ,IAAI,GAAI;AAChE,YAAM,gBAAoB,gBAAG;AAC7B,YAAM,EAAE,cAAc,aAAa,iBAAiB,IAAI,KAAK,QAAQ;AAErE,YAAM,cAAc;AAAA,QAChB;AAAA,QACA,YAAY;AAAA,QACZ;AAAA,QACA,aAAa;AAAA,QACb,YAAY;AAAA,MAChB;AAEA,UAAI,MAAM,KAAK,QAAQ,iBAAiB;AACxC,aAAO,KAAK,WAAW,EAAE,QAAQ,CAAC,QAAQ;AAEtC,eAAO,GAAG,OAAO,UAAU,YAAY,IAAI;AAAA,MAC/C,CAAC;AACD,YAAM,IAAI,MAAM,GAAG,EAAE;AAErB,gBAAU;AAAA,QACN;AAAA,QACA,IAAI,KAAK,CAAC,IAAI,gBAAgB,MAAa,EAAE,SAAS,CAAC,GAAG;AAAA,UACtD,MAAM;AAAA,QACV,CAAC;AAAA,MACL;AAAA,IACJ,SAAS,OAAP;AAAA,IAEF;AAAA,EACJ;AACJ;",
  "names": ["AcitveLoginType", "ActiveAction", "RecordType"]
}
