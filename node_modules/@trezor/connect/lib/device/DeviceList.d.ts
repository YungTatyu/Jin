import { TypedEmitter } from '@trezor/utils';
import { Transport, TRANSPORT } from '@trezor/transport';
import { DEVICE, TransportInfo } from '../events';
import { Device } from './Device';
import type { ConnectSettings, Device as DeviceTyped } from '../types';
interface DeviceListEvents {
    [TRANSPORT.START]: TransportInfo;
    [TRANSPORT.ERROR]: string;
    [DEVICE.CONNECT]: DeviceTyped;
    [DEVICE.CONNECT_UNACQUIRED]: DeviceTyped;
    [DEVICE.DISCONNECT]: DeviceTyped;
    [DEVICE.CHANGED]: DeviceTyped;
    [DEVICE.RELEASED]: DeviceTyped;
    [DEVICE.ACQUIRED]: DeviceTyped;
}
export interface IDeviceList {
    isConnected(): this is DeviceList;
    pendingConnection(): Promise<void> | undefined;
    setTransports: DeviceList['setTransports'];
    addAuthPenalty: DeviceList['addAuthPenalty'];
    removeAuthPenalty: DeviceList['removeAuthPenalty'];
    on: DeviceList['on'];
    once: DeviceList['once'];
    init: DeviceList['init'];
    dispose: DeviceList['dispose'];
}
export declare const assertDeviceListConnected: (deviceList: IDeviceList) => asserts deviceList is DeviceList;
type ConstructorParams = Pick<ConnectSettings, 'priority' | 'debug'> & {
    messages: Record<string, any>;
};
type InitParams = Pick<ConnectSettings, 'pendingTransportEvent' | 'transportReconnect'>;
export declare class DeviceList extends TypedEmitter<DeviceListEvents> implements IDeviceList {
    private transport;
    private transports;
    private devices;
    private creatingDevicesDescriptors;
    private readonly authPenaltyManager;
    private initPromise?;
    private rejectPending?;
    private transportCommonArgs;
    isConnected(): this is DeviceList;
    pendingConnection(): Promise<void> | undefined;
    constructor({ messages, priority, debug }: ConstructorParams);
    private createTransport;
    setTransports(transports: ConnectSettings['transports']): void;
    private onTransportUpdate;
    init(initParams?: InitParams): Promise<void>;
    private createInitPromise;
    private createReconnectPromise;
    private selectTransport;
    private initializeTransport;
    private waitForDevices;
    private _createAndSaveDevice;
    private _createUnacquiredDevice;
    private _createUnreadableDevice;
    getDevice(path: string): Device;
    getFirstDevicePath(): string;
    asArray(): DeviceTyped[];
    allDevices(): Device[];
    length(): number;
    transportType(): "BridgeTransport" | "NodeUsbTransport" | "WebUsbTransport" | "UdpTransport";
    getTransportInfo(): TransportInfo;
    dispose(): Promise<void>;
    cleanup(): Promise<void>;
    enumerate(transport?: Transport): Promise<void>;
    addAuthPenalty(device: Device): void;
    removeAuthPenalty(device: Device): void;
    private handle;
    private _takeAndCreateDevice;
    private _handleUsedElsewhere;
}
export {};
//# sourceMappingURL=DeviceList.d.ts.map